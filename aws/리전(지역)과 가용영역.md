# 리전(지역)과 가용영역

****[AWS] 3.리전(지역)과 가용영역(Availability Zone)****

[https://t1.daumcdn.net/cfile/tistory/997808375C59022131](https://t1.daumcdn.net/cfile/tistory/997808375C59022131)

***리전(지역)***

**▶ 말 그대로 지리적 위치를 말한다.**

- 아마존 웹 서비스들의 서버가 어디에 위치 하는가?

**▶ 내가 서비스 하려는 지역의 주 고객들이 거주하는 지역과 서버의 거리가 멀면 멀수록 느려진다.**

- 웹 사이트를 운영한다고 하면 내 싸이트를 이용하는 고객이 어디에 위치하는지에 따라 중요

**▶ 즉 주 고객들이 거주하고 있는 곳과 가까운 리전을 사용하는 것이 당연히 좋다.**

**▶ 최소한 2개이상의 가용 영역(AZ)로 구성된다.**

(이와 관련하여 추가적인 설명은 밑의 가용영역(AZ)에서 참고)

**▶ 2019년 2월 기준 20개의 리전**

**※ TIP**

▶ AWS는 지역에 따라 똑같은 상품을 쓴다고 해도 가격이 다를 수 있다고 한다.

▶ 즉 어떤 리전의 가격이 얼마인가도 고려사항이 될 수 있다.

▶ 현재 내 컴퓨터를 통해 어떤 리전을 선택할 때 유리한지 측정해 볼 수도 있다.

1. 다음 싸이트 접속 - 하단 [ HTTP Ping ] 클릭(혹시 해당 싸이트가 중지 된 경우 이와 비슷한 싸이트는 많은이 구글링 해보자)

[https://www.cloudping.info/](https://www.cloudping.info/)

[https://t1.daumcdn.net/cfile/tistory/9993CA405C58FC4933](https://t1.daumcdn.net/cfile/tistory/9993CA405C58FC4933)

2. 측정이 끝나면 각 리전별로 latency를 확인 할 수 있다.

[https://t1.daumcdn.net/cfile/tistory/9928B2375C59236606](https://t1.daumcdn.net/cfile/tistory/9928B2375C59236606)

그런데 Asia Pacific (Seoul)이 역시 가장 빠르고, Asia Pacific (Tokyo)도 꽤 괜찮은 편이다.

아무튼 다음과 같은 싸이트들이 많고 서비스의 속도, 지연시간도 측정 할 수 있으니 참고하자.

***가용영역(Availability Zone) (AZ)***

**▶ 데이터센터의 클러스터**

- 한 리전에는 여러 가용성 영역이 있다 (한 리전당 최소 2AZ)

- 전용선으로 연결 되어 있기 때문에 마친 한 건물인 것과 같이 빠르게 데이터를 주고 받을 수 있다. (데이터 센터의 클러스터)

- 그렇기 때문에 빠르게 데이터를 백어 하고 데이터를 이전할 수 있는 구조이다.

**▶ 다른 가용영역(AZ)의 장애로부터 격리됨**

- 각각의 다른 가용 영역의 장애로부터 격리될 수 있다는 점이 중요하다.

- 자연재해 또는 단층선에 문제가 발생할 수 있는 곳은 AWS에서 가용영역을 분리한다.

(리전의 AZ들은 지연시간이 짧은 링크를 통해 연결되어 있다.)

- 좀더 쉽게 예를 들어 설명하자면

하나의 지역에 혹시 특정 서비스들 이용할 수 있는 하나의 건물이 있다고 생각 해보자.

혹시 이 건물이 자연재해로 인해 (지진 등) 건물이 부서진다고 하면 아무 서비스를 이용할 수 없을 것이다.

똑같은 서비스를 타지역의 다른 건물에서 서비스 하고있다면 일단 해당 건물을 통해 서비스는 가능 한 것이다.

즉, 현재 서울의 AZ는 2개이고 한개의 AZ가 장애가 나더라도 다른 AZ를 통해 서비스가 가능한 구조이다.

이런 위험 분산 측면에서 AZ가 최소한 2개이상으로 구성되어 있는 것 같다.

**▶ 2019년 2월 기준 60개의 가용영역(AZ)**

[https://t1.daumcdn.net/cfile/tistory/99747A335C5900B834](https://t1.daumcdn.net/cfile/tistory/99747A335C5900B834)

- 그리고 새로운 리전도 제공 예정이다

(4 Regions(바레인, 케이프 타운, 홍콩, 밀라노), 12 AZs)

- 위 리전중 AWS GovCloud(미국)는 특정 규제 및 규정 준수 요구사항을 준수함으로써 미국 정부기관과 고객들이 민감한 워크로드를 클라우드로 이전 할 수 있도록 설계된 격리 리전이다.

**※ 이쯤 리전, 가용영역에 대해 한가지더 짚고 넘어가고 싶은 것이 있다.**

다음 사례를 살펴보자.

**ex)**

**2019년 11월 22일 AWS의 서울 지역 서버에 장애가 발생하였다.**

**당시 장애는 비록 오전 시간 약 84분간 발생하였고, 배달의민족, 쿠팡, 야놀자, 마켓컬리, 여러 암호화폐거래소, 신한은행 등의 사업자와 일반 사용자들이 크고 작은 불편을 겪었다.**

이 기업들의 공통점은 이러했다.

- 서울 리전에만 AWS를 구축해놓은 기업 들이다.

이 당시 대안으로 얘기가 나왔던 것이 **멀티클라우드** 이다.

- 일본 등 다른 지역의 AWS 리전으로 멀티 클라우드를 적용한 기업들은 이번 장애를 피할 수 있었기 때문이다.

AWS와 기업들은 **SLA(서비스레벨어그리먼트) 99.95%** 서비스 수준 계약을 체결 한다.

(**SLA 99.95%란** 한 달에 4시간 이상 서비스 장애가 발생해야만 보상을 제공한다는 내용)

어찌보면 고객에게 불리할 수 있는 조항이다.

또 앞으로도 장애가 발생하지 않는다는 보장도 없다.

정말 단 1분 1초도 서비스가 중지되는 사태를 멀티클라우드를 통해 피해 갈 수 있을 것으로 생각 되지만, 비용문제도 있을 수 있으니 신중히 접근하도록 해야 할 것 같다.

AWS 구축시 한번쯤 고려해 볼 만한 사항이다.

그리고 AWS 수업을 듣고 난 직후이기에 한가지 정리 해두려 한다.

리전별로 가격이 다른데 어디가 가장 싸고 비쌀까?

쌍파울로 => 제일 비쌈

- 개발 도상국

- 전력 수급사정이 좋지 않음

버지니아 =>  제일 쌈

- 제일 많이 사용하고 수익이 나기때문에 가격 다운

- 전반적으로 미국지역이 쌈